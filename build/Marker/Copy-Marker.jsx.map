{"version":3,"file":"Copy-Marker.jsx","sources":["../../src/polyfill/array/forEach.js","../../src/polyfill/array/every.js","../../src/projects/Marker/ui.ts","../../src/utils/Javascript/general.ts","../../src/utils/typeCheck.ts","../../src/utils/GetEntity/getSelectedEntity.ts","../../src/projects/Marker/utils.ts","../../src/projects/Marker/method.ts","../../src/projects/Marker/index.ts"],"sourcesContent":["/*\n * forEach Polyfill\n *\n * 2015-12-27\n *\n * By Feifei Hang, http://feifeihang.info\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\"use strict\";\n(function() {\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function forEach(callback, thisArg) {\n      if (typeof callback !== \"function\") {\n        throw new TypeError(callback + \" is not a function\");\n      }\n      var array = this;\n      thisArg = thisArg || this;\n      for (var i = 0, l = array.length; i !== l; ++i) {\n        callback.call(thisArg, array[i], i, array);\n      }\n    };\n  }\n})();\n","if (!Array.prototype.every) {\n  Array.prototype.every = function(callbackfn, thisArg) {\n    \"use strict\";\n    var T, k;\n\n    if (this == null) {\n      throw new TypeError(\"this is null or not defined\");\n    }\n\n    // 1. O は、this を引数として ToObject に渡し、実行した結果です。\n    var O = Object(this);\n\n    // 2. lenValue は、\"length\" を引数として O の Get 内部メソッドを実行した結果です。\n    // 3. len を ToUint32(lenValue) とします。\n    var len = O.length >>> 0;\n\n    // 4. IsCallable(callbackfn) が false の場合、TypeError 例外がスローされます。\n    if (typeof callbackfn !== \"function\") {\n      throw new TypeError();\n    }\n\n    // 5. thisArg が与えられた場合、T は thisArg となり、さもなくば T は undefined となります。\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n\n    // 6. k を 0 とします。\n    k = 0;\n\n    // 7. k < len が成り立つ間、繰り返します。\n    while (k < len) {\n      var kValue;\n\n      // a. Pk を ToString(k) とします。\n      //    これは in 演算子の左オペランドについて暗黙的です。\n      // b. kPresent は、Pk を引数として O の HasProperty 内部メソッドを実行した結果です。\n      //   このステップは c と組み合わせられます。\n      // c. kPresent が true の場合、続きます。\n      if (k in O) {\n        // i. kValue は、Pk を引数として O の Get 内部メソッドを実行した結果です。\n        kValue = O[k];\n\n        // ii. testResult は、this 値としての T と、kValue、k、0 を含む引数リストを\n        //     ともなって、callbackfn の Call 内部メソッドを実行した結果です。\n        var testResult = callbackfn.call(T, kValue, k, O);\n\n        // iii. ToBoolean(testResult) が false の場合、false を返します。\n        if (!testResult) {\n          return false;\n        }\n      }\n      k++;\n    }\n    return true;\n  };\n}\n","import globalThis from \"globalThis\";\n\nexport const dialog: Panel = globalThis;\n\n// DIALOG\n// ======\ndialog.text = \"Copy-Marker\";\ndialog.orientation = \"column\";\ndialog.alignChildren = [\"left\", \"top\"];\ndialog.spacing = 10;\ndialog.margins = 16;\n\n// methodGroup\n// ======\nexport const methodGroup = dialog.add(\"group\", undefined, {\n  name: \"methodGroup\"\n});\nmethodGroup.orientation = \"column\";\nmethodGroup.alignChildren = [\"left\", \"center\"];\nmethodGroup.spacing = 10;\nmethodGroup.margins = 0;\n\nexport const layersToCompRadio = methodGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"Layers-To-Comp\"\n  }\n);\nlayersToCompRadio.text = \"Layers-To-Comp\";\n\nexport const topLayerToAnotherCompRadio = methodGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"TopLayer-To-AnotherComp\"\n  }\n);\ntopLayerToAnotherCompRadio.text = \"TopLayer-To-AnotherComp\";\n\nexport const topLayerToAnotherCompTopLayerRadio = methodGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"TopLayer-To-AnotherComp-TopLayer\"\n  }\n);\ntopLayerToAnotherCompTopLayerRadio.text = \"TopLayer-To-AnotherComp-TopLayer\";\n\nexport const removeAllCompMarkers = methodGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"TopLayer-To-AnotherComp-TopLayer\"\n  }\n);\nremoveAllCompMarkers.text = \"Remove-AllCompMarkers\";\n\n// setButton\n// ======\nexport const setButton = dialog.add(\"button\", undefined, undefined, {\n  name: \"setButton\"\n});\nsetButton.text = \"set source\";\n\n// setNameGroup\n// ======\nexport const setNameGroup = dialog.add(\"group\", undefined, {\n  name: \"setNameGroup\"\n});\nsetNameGroup.orientation = \"row\";\nsetNameGroup.alignChildren = [\"left\", \"center\"];\nsetNameGroup.spacing = 10;\nsetNameGroup.margins = 0;\n\nexport const setNameDedscription = setNameGroup.add(\n  \"statictext\",\n  undefined,\n  undefined,\n  {\n    name: \"setNameDedscription\"\n  }\n);\nsetNameDedscription.text = \"name: \";\n\nexport const nameText = setNameGroup.add(\"statictext\", undefined, undefined, {\n  name: \"edittext\"\n});\nnameText.text = \"\";\n(nameText.preferredSize as Dimension).width = 80;\nnameText.enabled = false;\n\n// confirmGroup\n// ======\nexport const confirmGroup = dialog.add(\"group\", undefined, {\n  name: \"confirmGroup\"\n});\nconfirmGroup.orientation = \"row\";\nconfirmGroup.alignChildren = [\"left\", \"center\"];\nconfirmGroup.spacing = 10;\nconfirmGroup.margins = 0;\nconfirmGroup.alignment = [\"left\", \"top\"];\n(confirmGroup.preferredSize as Dimension).height = 40;\n\nexport const ok = confirmGroup.add(\"button\", undefined, undefined, {\n  name: \"ok\"\n});\nok.text = \"Select target and OK\";\nok.justify = \"left\";\nok.alignment = [\"left\", \"center\"];\n","import {\n  isCompItem,\n  isFolderItem,\n  isFootageItem,\n  isAVLayer,\n  isFileSource,\n  isSolidSource,\n  isProperty,\n  isPropertyGroup,\n  isObject\n} from \"../typeCheck\";\nimport { getAllItems } from \"../GetEntity/getEntity\";\n\nexport const times = (\n  step: number,\n  callback: (index: number) => boolean | null | undefined | void,\n  reverse: boolean = false\n): void => {\n  if (reverse) {\n    for (let i = step; i > 0; i--) {\n      if (callback(i)) {\n        break;\n      } else {\n        continue;\n      }\n    }\n  } else {\n    for (let i = 1; i <= step; i++) {\n      if (callback(i)) {\n        break;\n      } else {\n        continue;\n      }\n    }\n  }\n};\n\nexport const unselectAllItems = (): void => {\n  getAllItems().forEach(item => {\n    if (item.selected) item.selected = false;\n  });\n};\n\nexport const computeDurationWithMsec = (ms: number): string => {\n  const h = parseInt(String(Math.floor(ms / 3600000) + 100).substring(1));\n  const m = parseInt(\n    String(Math.floor((ms - h * 3600000) / 60000) + 100).substring(1)\n  );\n  const s = parseInt(\n    String(Math.round((ms - h * 3600000 - m * 60000) / 1000) + 100).substring(1)\n  );\n  return h + \":\" + m + \":\" + s;\n};\n","export const isFolderItem = (item: any): item is FolderItem => {\n  return item instanceof FolderItem;\n};\n\nexport const isCompItem = (item: any): item is CompItem => {\n  return item instanceof CompItem;\n};\n\nexport const isFootageItem = (item: any): item is FootageItem => {\n  return item instanceof FootageItem;\n};\n\nexport const isAVItem = (item: any): item is CompItem | FootageItem => {\n  return isCompItem(item) || isFootageItem(item);\n};\n\nexport const isAnyItem = (item: any): item is $T.ADBE.AnyItem => {\n  return isCompItem(item) || isFolderItem(item) || isFootageItem(item);\n};\n\nexport const isAVLayer = (layer: any): layer is AVLayer => {\n  return layer instanceof AVLayer;\n};\n\nexport const isCameraLayer = (layer: any): layer is CameraLayer => {\n  return layer instanceof CameraLayer;\n};\n\nexport const isLightLayer = (layer: any): layer is LightLayer => {\n  return layer instanceof LightLayer;\n};\n\nexport const isShapeLayer = (layer: any): layer is ShapeLayer => {\n  return layer instanceof ShapeLayer;\n};\n\nexport const isTextLayer = (layer: any): layer is TextLayer => {\n  return layer instanceof TextLayer;\n};\n\nexport const isAnyLayer = (layer: any): layer is $T.ADBE.AnyLayer => {\n  return (\n    isAVLayer(layer) ||\n    isCameraLayer(layer) ||\n    isLightLayer(layer) ||\n    isShapeLayer(layer) ||\n    isTextLayer(layer)\n  );\n};\n\nexport const isFileSource = (source: any): source is FileSource => {\n  return source instanceof FileSource;\n};\n\nexport const isSolidSource = (source: any): source is SolidSource => {\n  return source instanceof SolidSource;\n};\n\nexport const isPlaceholderSource = (\n  source: any\n): source is PlaceholderSource => {\n  return source instanceof PlaceholderSource;\n};\n\nexport const isAnySource = (\n  source: any\n): source is FileSource | SolidSource | PlaceholderSource => {\n  return (\n    isFileSource(source) || isSolidSource(source) || isPlaceholderSource(source)\n  );\n};\n\nexport const isProperty = (property: any): property is Property => {\n  return property instanceof Property;\n};\n\nexport const isPropertyGroup = (property: any): property is PropertyGroup => {\n  return property instanceof PropertyGroup;\n};\n\nexport const isMaskPropertyGroup = (\n  property: any\n): property is MaskPropertyGroup => {\n  return property instanceof MaskPropertyGroup;\n};\n\nexport const isAnyProperty = (\n  property: any\n): property is $T.ADBE.AnyProperty => {\n  return (\n    isProperty(property) ||\n    isPropertyGroup(property) ||\n    isMaskPropertyGroup(property)\n  );\n};\n\nexport const isTextDocument = (value: any): value is TextDocument => {\n  return value instanceof TextDocument;\n};\n\nexport const isShape = (value: any): value is Shape => {\n  return value instanceof Shape;\n};\n\nexport const isMarkerValue = (value: any): value is MarkerValue => {\n  return value instanceof MarkerValue;\n};\n\nexport const isBasicPropertyValue = (\n  value: any\n): value is $T.Mat.BasicValue => {\n  const isBasicPropertyArray =\n    isArray(value) &&\n    ((value.length === 2 && isNumber(value[0]) && isNumber(value[1])) ||\n      (value.length === 3 &&\n        isNumber(value[0]) &&\n        isNumber(value[1]) &&\n        isNumber(value[2])) ||\n      (value.length === 4 &&\n        isNumber(value[0]) &&\n        isNumber(value[1]) &&\n        isNumber(value[2]) &&\n        isNumber(value[3])));\n  return (\n    isUndefined(value) ||\n    isBoolean(value) ||\n    isNumber(value) ||\n    isBasicPropertyArray\n  );\n};\n\nexport const isPropertyValue = (value: any): value is PropertyValue => {\n  return (\n    isTextDocument(value) ||\n    isShape(value) ||\n    isMarkerValue(value) ||\n    isBasicPropertyValue(value)\n  );\n};\n\nexport const isObject = (data: any): data is { [key: string]: any } => {\n  return Object.prototype.toString.call(data) === \"[object Object]\";\n};\n\nexport const isArray = (data: any): data is any[] => {\n  return Array.isArray(data);\n};\n\nexport const isFunction = (data: any): data is Function => {\n  return typeof data === \"function\";\n};\n\nconst posinf = Number.POSITIVE_INFINITY;\nconst neginf = Number.NEGATIVE_INFINITY;\n\nexport const isNumber = (data: any): data is number => {\n  return typeof data === \"number\" && data > neginf && data < posinf;\n};\n\nexport const isUndefined = (data: any): data is undefined => {\n  return data === undefined;\n};\n\nexport const isBoolean = (data: any): data is Boolean => {\n  return data === false || data === true;\n};\n\nexport const isString = (data: any): data is string => {\n  return typeof data === \"string\";\n};\n","import { getActiveItem, getActiveCompItem } from \"./getEntity\";\n\nexport const getSelectedItems = (): $T.ADBE.AnyItem[] | null => {\n  const items = app.project.selection;\n  return items[0] ? (items as $T.ADBE.AnyItem[]) : null;\n};\n\nexport const getSelectedLayers = (\n  compItem: CompItem\n): $T.ADBE.AnyLayer[] | null => {\n  const layers = compItem.selectedLayers as $T.ADBE.AnyLayer[];\n  return layers[0] ? layers : null;\n};\n\nexport const getSelectedProperties = (\n  compItem: CompItem\n): $T.ADBE.AnyProperty[] | null => {\n  const properties = compItem.selectedProperties as\n    | $T.ADBE.AnyProperty[]\n    | null;\n  return properties && properties[0] ? properties : null;\n};\n\nexport const getSelectedPropertiesFromActive = ():\n  | $T.ADBE.AnyProperty[]\n  | null => {\n  const compItem = getActiveCompItem();\n  return compItem && getSelectedProperties(compItem);\n};\n\nexport const getSelectedLayersFromActive = (): $T.ADBE.AnyLayer[] | null => {\n  const compItem = getActiveCompItem();\n  return compItem && getSelectedLayers(compItem);\n};\n","import { getActiveItem } from \"../../utils/GetEntity/getEntity\";\nimport {\n  getSelectedItems,\n  getSelectedLayersFromActive\n} from \"../../utils/GetEntity/getSelectedEntity\";\nimport { times } from \"../../utils/Javascript/general\";\nimport { isCompItem } from \"../../utils/typeCheck\";\n\nexport const removeAllMarkers = (markerProp: Property) => {\n  times(\n    markerProp.numKeys,\n    i => {\n      markerProp.removeKey(i);\n    },\n    true\n  );\n};\n\ntype ExtractedMarkers = [number, PropertyValue][];\n\nexport const getMarkers = (markerProp: Property): ExtractedMarkers => {\n  const markers: ExtractedMarkers = [];\n\n  times(markerProp.numKeys, i => {\n    markers.push([markerProp.keyTime(i), markerProp.keyValue(i)]);\n  });\n  return markers;\n};\n\nexport const getTopLayerMarkers = (item: CompItem): ExtractedMarkers | null => {\n  const sourceLayer = item.layer(1);\n  if (sourceLayer.property(\"marker\") === null) {\n    alert(\"There are no markers.\");\n    return null;\n  }\n  const sourceMarkers = sourceLayer.property(\"marker\") as Property;\n  if (sourceMarkers.numKeys === 0) {\n    alert(\"There are 0 markers.\");\n    return null;\n  }\n\n  return getMarkers(sourceMarkers);\n};\n","import { times } from \"../../utils/Javascript/general\";\nimport { isCompItem } from \"../../utils/typeCheck\";\nimport { getMarkers, getTopLayerMarkers, removeAllMarkers } from \"./utils\";\n\nexport const removeAllCompMarkers = (items: CompItem[]) => {\n  items.forEach(item => {\n    removeAllMarkers(item.markerProperty);\n  });\n};\n\nexport const layersToComp = (items: CompItem[]) => {\n  items.forEach(item => {\n    times(item.numLayers, i => {\n      const layer = item.layer(i);\n      const markerProp = layer.property(\"marker\") as Property;\n      if (markerProp.numKeys === 0) {\n        return;\n      }\n\n      const markers = getMarkers(markerProp);\n\n      markers.forEach((_, i) => {\n        item.markerProperty.setValueAtTime(markers[i][0], markers[i][1]);\n      });\n    });\n  });\n};\n\nexport const topLayerToAnotherComp = (\n  sourceItem: CompItem,\n  targetItems: CompItem[]\n) => {\n  const markers: [number, PropertyValue][] | null = getTopLayerMarkers(\n    sourceItem\n  );\n\n  if (!markers) return;\n\n  targetItems.forEach(item => {\n    if (!isCompItem(item)) {\n      alert(\"No composition is selected.\");\n      return;\n    }\n\n    markers.forEach((_, i) => {\n      item.markerProperty.setValueAtTime(markers[i][0], markers[i][1]);\n    });\n  });\n};\n\nexport const topLayerToAnotherCompTopLayer = (\n  sourceItem: CompItem,\n  targetItems: CompItem[]\n) => {\n  const markers: [number, PropertyValue][] | null = getTopLayerMarkers(\n    sourceItem\n  );\n\n  if (!markers) return;\n\n  targetItems.forEach(item => {\n    if (!isCompItem(item)) {\n      alert(\"No composition is selected.\");\n      return;\n    }\n    const targetLayer = item.layer(1);\n    const targetMarker = targetLayer.property(\"marker\") as Property;\n\n    markers.forEach((_, i) => {\n      targetMarker.setValueAtTime(markers[i][0], markers[i][1]);\n    });\n  });\n};\n","import \"../../polyfill/array/forEach\";\nimport \"../../polyfill/array/every\";\nimport * as win from \"./ui\";\nimport { getSelectedItems } from \"../../utils/GetEntity/getSelectedEntity\";\nimport { times } from \"../../utils/Javascript/general\";\nimport { isAVItem, isAVLayer, isCompItem } from \"../../utils/typeCheck\";\nimport {\n  layersToComp,\n  topLayerToAnotherComp,\n  topLayerToAnotherCompTopLayer,\n  removeAllCompMarkers\n} from \"./method\";\n\nconst isCompItems = (items: any): items is CompItem[] => {\n  return items.every(isCompItem);\n};\n\nconst main = () => {\n  // initialize\n  // ======\n  win.layersToCompRadio.value = true;\n  win.setButton.enabled = false;\n  win.setNameGroup.enabled = false;\n\n  // event\n  // ======\n\n  win.layersToCompRadio.onActivate = () => {\n    win.setButton.enabled = false;\n    win.setNameGroup.enabled = false;\n  };\n  win.layersToCompRadio.onDeactivate = () => {\n    win.setButton.enabled = true;\n    win.setNameGroup.enabled = true;\n  };\n\n  win.removeAllCompMarkers.onActivate = () => {\n    win.setButton.enabled = false;\n    win.setNameGroup.enabled = false;\n  };\n  win.removeAllCompMarkers.onDeactivate = () => {\n    win.setButton.enabled = true;\n    win.setNameGroup.enabled = true;\n  };\n\n  win.topLayerToAnotherCompRadio.onActivate = () => {\n    win.setButton.enabled = true;\n    win.setNameGroup.enabled = true;\n  };\n\n  win.topLayerToAnotherCompTopLayerRadio.onActivate = () => {\n    win.setButton.enabled = true;\n    win.setNameGroup.enabled = true;\n  };\n\n  let sourceItem: CompItem;\n  win.setButton.onClick = () => {\n    const items = getSelectedItems();\n\n    if (!items) {\n      return;\n    }\n\n    if (!isCompItem(items[0])) {\n      alert(\"No compitem is selected.\");\n      return;\n    }\n    sourceItem = items[0];\n\n    win.nameText.text = sourceItem.name;\n  };\n\n  win.ok.onClick = () => {\n    const targetItems = getSelectedItems();\n    if (!targetItems) {\n      return;\n    }\n\n    if (!isCompItems(targetItems)) {\n      alert(\"No compitem is selected.\");\n      return;\n    }\n\n    app.beginUndoGroup(\"Copy-Marker\");\n\n    if (win.layersToCompRadio.value) {\n      layersToComp(targetItems);\n    }\n\n    if (win.topLayerToAnotherCompRadio.value) {\n      topLayerToAnotherComp(sourceItem, targetItems);\n    }\n\n    if (win.topLayerToAnotherCompTopLayerRadio.value) {\n      topLayerToAnotherCompTopLayer(sourceItem, targetItems);\n    }\n\n    if (win.removeAllCompMarkers.value) {\n      removeAllCompMarkers(targetItems);\n    }\n\n    app.endUndoGroup();\n  };\n\n  // ======\n\n  win.dialog.layout.layout();\n  win.dialog.layout.resize();\n};\n\nmain();\n"],"names":["Array","prototype","forEach","callback","thisArg","TypeError","array","i","l","length","call","every","callbackfn","T","k","O","Object","len","arguments","kValue","testResult","dialog","globalThis","text","orientation","alignChildren","spacing","margins","methodGroup","add","undefined","name","layersToCompRadio","topLayerToAnotherCompRadio","topLayerToAnotherCompTopLayerRadio","removeAllCompMarkers","setButton","setNameGroup","setNameDedscription","nameText","preferredSize","width","enabled","confirmGroup","alignment","height","ok","justify","times","step","reverse","isCompItem","item","CompItem","getSelectedItems","items","app","project","selection","removeAllMarkers","markerProp","numKeys","removeKey","getMarkers","markers","push","keyTime","keyValue","getTopLayerMarkers","sourceLayer","layer","property","alert","sourceMarkers","markerProperty","layersToComp","numLayers","_","setValueAtTime","topLayerToAnotherComp","sourceItem","targetItems","topLayerToAnotherCompTopLayer","targetLayer","targetMarker","isCompItems","main","win","value","onActivate","onDeactivate","onClick","beginUndoGroup","endUndoGroup","layout","resize"],"mappings":"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"}