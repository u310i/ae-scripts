{"version":3,"file":"TopLayerMarker-To-Something-Panel.jsx","sources":["../../src/polyfill/array/forEach.js","../../src/polyfill/array/every.js","../../src/projects/Marker/ui.ts","../../src/utils/Javascript/general.ts","../../src/utils/typeCheck.ts","../../src/utils/GetEntity/getSelectedEntity.ts","../../src/projects/Marker/utils/extractTopLayerMarkers.ts","../../src/projects/Marker/utils/topLayerMarkerToCompMarker.ts","../../src/projects/Marker/utils/topLayerMarkerToTopLayer.ts","../../src/projects/Marker/index.ts"],"sourcesContent":["/*\n * forEach Polyfill\n *\n * 2015-12-27\n *\n * By Feifei Hang, http://feifeihang.info\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\"use strict\";\n(function() {\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function forEach(callback, thisArg) {\n      if (typeof callback !== \"function\") {\n        throw new TypeError(callback + \" is not a function\");\n      }\n      var array = this;\n      thisArg = thisArg || this;\n      for (var i = 0, l = array.length; i !== l; ++i) {\n        callback.call(thisArg, array[i], i, array);\n      }\n    };\n  }\n})();\n","if (!Array.prototype.every) {\n  Array.prototype.every = function(callbackfn, thisArg) {\n    \"use strict\";\n    var T, k;\n\n    if (this == null) {\n      throw new TypeError(\"this is null or not defined\");\n    }\n\n    // 1. O は、this を引数として ToObject に渡し、実行した結果です。\n    var O = Object(this);\n\n    // 2. lenValue は、\"length\" を引数として O の Get 内部メソッドを実行した結果です。\n    // 3. len を ToUint32(lenValue) とします。\n    var len = O.length >>> 0;\n\n    // 4. IsCallable(callbackfn) が false の場合、TypeError 例外がスローされます。\n    if (typeof callbackfn !== \"function\") {\n      throw new TypeError();\n    }\n\n    // 5. thisArg が与えられた場合、T は thisArg となり、さもなくば T は undefined となります。\n    if (arguments.length > 1) {\n      T = thisArg;\n    }\n\n    // 6. k を 0 とします。\n    k = 0;\n\n    // 7. k < len が成り立つ間、繰り返します。\n    while (k < len) {\n      var kValue;\n\n      // a. Pk を ToString(k) とします。\n      //    これは in 演算子の左オペランドについて暗黙的です。\n      // b. kPresent は、Pk を引数として O の HasProperty 内部メソッドを実行した結果です。\n      //   このステップは c と組み合わせられます。\n      // c. kPresent が true の場合、続きます。\n      if (k in O) {\n        // i. kValue は、Pk を引数として O の Get 内部メソッドを実行した結果です。\n        kValue = O[k];\n\n        // ii. testResult は、this 値としての T と、kValue、k、0 を含む引数リストを\n        //     ともなって、callbackfn の Call 内部メソッドを実行した結果です。\n        var testResult = callbackfn.call(T, kValue, k, O);\n\n        // iii. ToBoolean(testResult) が false の場合、false を返します。\n        if (!testResult) {\n          return false;\n        }\n      }\n      k++;\n    }\n    return true;\n  };\n}\n","import globalThis from \"globalThis\";\n\nexport const dialog: Panel = globalThis;\n\n// DIALOG\n// ======\ndialog.text = \"TopLayerMarker-To-Something-Panel\";\ndialog.orientation = \"column\";\ndialog.alignChildren = [\"left\", \"top\"];\ndialog.spacing = 10;\ndialog.margins = 16;\n\n// methodGroup\n// ======\nexport const methodGroup = dialog.add(\"group\", undefined, {\n  name: \"methodGroup\"\n});\nmethodGroup.orientation = \"row\";\nmethodGroup.alignChildren = [\"left\", \"center\"];\nmethodGroup.spacing = 10;\nmethodGroup.margins = 0;\n\nexport const topLayerMarkerToCompMarkerRadio = methodGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"topLayerMarkerToCompMarkerRadio\"\n  }\n);\ntopLayerMarkerToCompMarkerRadio.text = \"topLayerMarkerToCompMarkerRadio\";\n\nexport const topLayerMarkerToTopLayerRadio = methodGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"topLayerMarkerToTopLayerRadio\"\n  }\n);\ntopLayerMarkerToTopLayerRadio.text = \"topLayerMarkerToTopLayerRadio\";\n\n// setButton\n// ======\nexport const setButton = dialog.add(\"button\", undefined, undefined, {\n  name: \"setButton\"\n});\nsetButton.text = \"set source\";\n\n// idGroup\n// ======\nexport const idGroup = dialog.add(\"group\", undefined, { name: \"idGroup\" });\nidGroup.orientation = \"row\";\nidGroup.alignChildren = [\"left\", \"center\"];\nidGroup.spacing = 10;\nidGroup.margins = 0;\n\nexport const idDescription = idGroup.add(\"statictext\", undefined, undefined, {\n  name: \"idDescription\"\n});\nidDescription.text = \"ID: \";\n\nexport const idText = idGroup.add(\"edittext\", undefined, undefined, {\n  name: \"idText\"\n});\nidText.text = \"\";\n(idText.preferredSize as Dimension).width = 80;\n\n// confirmGroup\n// ======\nexport const confirmGroup = dialog.add(\"group\", undefined, {\n  name: \"confirmGroup\"\n});\nconfirmGroup.orientation = \"row\";\nconfirmGroup.alignChildren = [\"left\", \"center\"];\nconfirmGroup.spacing = 10;\nconfirmGroup.margins = 0;\nconfirmGroup.alignment = [\"right\", \"top\"];\n(confirmGroup.preferredSize as Dimension).height = 40;\n\nexport const ok = confirmGroup.add(\"button\", undefined, undefined, {\n  name: \"ok\"\n});\nok.text = \"Select target and OK\";\nok.justify = \"left\";\nok.alignment = [\"left\", \"center\"];\n","import {\n  isCompItem,\n  isFolderItem,\n  isFootageItem,\n  isAVLayer,\n  isFileSource,\n  isSolidSource,\n  isProperty,\n  isPropertyGroup,\n  isObject\n} from \"../typeCheck\";\nimport { getAllItems } from \"../GetEntity/getEntity\";\n\nexport const times = (\n  step: number,\n  callback: (index: number) => boolean | null | undefined | void\n): void => {\n  for (let i = 1; i <= step; i++) {\n    if (callback(i)) {\n      break;\n    } else {\n      continue;\n    }\n  }\n};\n\nexport const unselectAllItems = (): void => {\n  getAllItems().forEach(item => {\n    if (item.selected) item.selected = false;\n  });\n};\n\nexport const computeDurationWithMsec = (ms: number): string => {\n  const h = parseInt(String(Math.floor(ms / 3600000) + 100).substring(1));\n  const m = parseInt(\n    String(Math.floor((ms - h * 3600000) / 60000) + 100).substring(1)\n  );\n  const s = parseInt(\n    String(Math.round((ms - h * 3600000 - m * 60000) / 1000) + 100).substring(1)\n  );\n  return h + \":\" + m + \":\" + s;\n};\n","export const isFolderItem = (item: any): item is FolderItem => {\n  return item instanceof FolderItem;\n};\n\nexport const isCompItem = (item: any): item is CompItem => {\n  return item instanceof CompItem;\n};\n\nexport const isFootageItem = (item: any): item is FootageItem => {\n  return item instanceof FootageItem;\n};\n\nexport const isAVItem = (item: any): item is CompItem | FootageItem => {\n  return isCompItem(item) || isFootageItem(item);\n};\n\nexport const isAnyItem = (item: any): item is $T.ADBE.AnyItem => {\n  return isCompItem(item) || isFolderItem(item) || isFootageItem(item);\n};\n\nexport const isAVLayer = (layer: any): layer is AVLayer => {\n  return layer instanceof AVLayer;\n};\n\nexport const isCameraLayer = (layer: any): layer is CameraLayer => {\n  return layer instanceof CameraLayer;\n};\n\nexport const isLightLayer = (layer: any): layer is LightLayer => {\n  return layer instanceof LightLayer;\n};\n\nexport const isShapeLayer = (layer: any): layer is ShapeLayer => {\n  return layer instanceof ShapeLayer;\n};\n\nexport const isTextLayer = (layer: any): layer is TextLayer => {\n  return layer instanceof TextLayer;\n};\n\nexport const isAnyLayer = (layer: any): layer is $T.ADBE.AnyLayer => {\n  return (\n    isAVLayer(layer) ||\n    isCameraLayer(layer) ||\n    isLightLayer(layer) ||\n    isShapeLayer(layer) ||\n    isTextLayer(layer)\n  );\n};\n\nexport const isFileSource = (source: any): source is FileSource => {\n  return source instanceof FileSource;\n};\n\nexport const isSolidSource = (source: any): source is SolidSource => {\n  return source instanceof SolidSource;\n};\n\nexport const isPlaceholderSource = (\n  source: any\n): source is PlaceholderSource => {\n  return source instanceof PlaceholderSource;\n};\n\nexport const isAnySource = (\n  source: any\n): source is FileSource | SolidSource | PlaceholderSource => {\n  return (\n    isFileSource(source) || isSolidSource(source) || isPlaceholderSource(source)\n  );\n};\n\nexport const isProperty = (property: any): property is Property => {\n  return property instanceof Property;\n};\n\nexport const isPropertyGroup = (property: any): property is PropertyGroup => {\n  return property instanceof PropertyGroup;\n};\n\nexport const isMaskPropertyGroup = (\n  property: any\n): property is MaskPropertyGroup => {\n  return property instanceof MaskPropertyGroup;\n};\n\nexport const isAnyProperty = (\n  property: any\n): property is $T.ADBE.AnyProperty => {\n  return (\n    isProperty(property) ||\n    isPropertyGroup(property) ||\n    isMaskPropertyGroup(property)\n  );\n};\n\nexport const isTextDocument = (value: any): value is TextDocument => {\n  return value instanceof TextDocument;\n};\n\nexport const isShape = (value: any): value is Shape => {\n  return value instanceof Shape;\n};\n\nexport const isMarkerValue = (value: any): value is MarkerValue => {\n  return value instanceof MarkerValue;\n};\n\nexport const isBasicPropertyValue = (\n  value: any\n): value is $T.Mat.BasicValue => {\n  const isBasicPropertyArray =\n    isArray(value) &&\n    ((value.length === 2 && isNumber(value[0]) && isNumber(value[1])) ||\n      (value.length === 3 &&\n        isNumber(value[0]) &&\n        isNumber(value[1]) &&\n        isNumber(value[2])) ||\n      (value.length === 4 &&\n        isNumber(value[0]) &&\n        isNumber(value[1]) &&\n        isNumber(value[2]) &&\n        isNumber(value[3])));\n  return (\n    isUndefined(value) ||\n    isBoolean(value) ||\n    isNumber(value) ||\n    isBasicPropertyArray\n  );\n};\n\nexport const isPropertyValue = (value: any): value is PropertyValue => {\n  return (\n    isTextDocument(value) ||\n    isShape(value) ||\n    isMarkerValue(value) ||\n    isBasicPropertyValue(value)\n  );\n};\n\nexport const isObject = (data: any): data is { [key: string]: any } => {\n  return Object.prototype.toString.call(data) === \"[object Object]\";\n};\n\nexport const isArray = (data: any): data is any[] => {\n  return Array.isArray(data);\n};\n\nexport const isFunction = (data: any): data is Function => {\n  return typeof data === \"function\";\n};\n\nconst posinf = Number.POSITIVE_INFINITY;\nconst neginf = Number.NEGATIVE_INFINITY;\n\nexport const isNumber = (data: any): data is number => {\n  return typeof data === \"number\" && data > neginf && data < posinf;\n};\n\nexport const isUndefined = (data: any): data is undefined => {\n  return data === undefined;\n};\n\nexport const isBoolean = (data: any): data is Boolean => {\n  return data === false || data === true;\n};\n\nexport const isString = (data: any): data is string => {\n  return typeof data === \"string\";\n};\n","import { getActiveItem, getActiveCompItem } from \"./getEntity\";\n\nexport const getSelectedItems = (): $T.ADBE.AnyItem[] | null => {\n  const items = app.project.selection;\n  return items[0] ? (items as $T.ADBE.AnyItem[]) : null;\n};\n\nexport const getSelectedLayers = (\n  compItem: CompItem\n): $T.ADBE.AnyLayer[] | null => {\n  const layers = compItem.selectedLayers as $T.ADBE.AnyLayer[];\n  return layers[0] ? layers : null;\n};\n\nexport const getSelectedProperties = (\n  compItem: CompItem\n): $T.ADBE.AnyProperty[] | null => {\n  const properties = compItem.selectedProperties as\n    | $T.ADBE.AnyProperty[]\n    | null;\n  return properties && properties[0] ? properties : null;\n};\n\nexport const getSelectedPropertiesFromActive = ():\n  | $T.ADBE.AnyProperty[]\n  | null => {\n  const compItem = getActiveCompItem();\n  return compItem && getSelectedProperties(compItem);\n};\n\nexport const getSelectedLayersFromActive = (): $T.ADBE.AnyLayer[] | null => {\n  const compItem = getActiveCompItem();\n  return compItem && getSelectedLayers(compItem);\n};\n","import { getSelectedItems } from \"../../../utils/GetEntity/getSelectedEntity\";\nimport { times } from \"../../../utils/Javascript/general\";\nimport { isCompItem } from \"../../../utils/typeCheck\";\n\ntype ExtractedMarkers = [number, PropertyValue][];\n\nexport const extractTopLayerMarkers = (\n  item: CompItem\n): ExtractedMarkers | null => {\n  const sourceLayer = item.layer(1);\n  if (sourceLayer.property(\"marker\") === null) {\n    alert(\"There are no markers.\");\n    return null;\n  }\n  const sourceMarkers = sourceLayer.property(\"marker\") as Property;\n  if (sourceMarkers.numKeys === 0) {\n    alert(\"There are 0 markers.\");\n    return null;\n  }\n\n  const extractedMarkers: ExtractedMarkers = [];\n\n  times(sourceMarkers.numKeys, i => {\n    extractedMarkers.push([\n      sourceMarkers.keyTime(i),\n      sourceMarkers.keyValue(i)\n    ]);\n  });\n\n  return extractedMarkers;\n};\n","import \"../../../polyfill/array/forEach\";\nimport { getActiveItem } from \"../../../utils/GetEntity/getEntity\";\nimport {\n  getSelectedItems,\n  getSelectedLayersFromActive\n} from \"../../../utils/GetEntity/getSelectedEntity\";\nimport { times } from \"../../../utils/Javascript/general\";\nimport { isCompItem } from \"../../../utils/typeCheck\";\nimport { extractTopLayerMarkers } from \"./extractTopLayerMarkers\";\n\nexport const topLayerMarkerToCompMarker = (\n  sourceItem: CompItem,\n  targetItems: CompItem[]\n) => {\n  const extractedMarkers:\n    | [number, PropertyValue][]\n    | null = extractTopLayerMarkers(sourceItem);\n\n  if (!extractedMarkers) return;\n\n  app.beginUndoGroup(\"TopLayerMarkerToTopLayer\");\n\n  targetItems.forEach(item => {\n    if (!isCompItem(item)) {\n      alert(\"No composition is selected.\");\n      return;\n    }\n\n    extractedMarkers.forEach((_, i) => {\n      item.markerProperty.setValueAtTime(\n        extractedMarkers[i][0],\n        extractedMarkers[i][1]\n      );\n    });\n  });\n\n  app.endUndoGroup();\n};\n","import \"../../../polyfill/array/forEach\";\nimport { getActiveItem } from \"../../../utils/GetEntity/getEntity\";\nimport { getSelectedItems } from \"../../../utils/GetEntity/getSelectedEntity\";\nimport { times } from \"../../../utils/Javascript/general\";\nimport { isCompItem } from \"../../../utils/typeCheck\";\nimport { extractTopLayerMarkers } from \"./extractTopLayerMarkers\";\n\nexport const topLayerMarkerToTopLayer = (\n  sourceItem: CompItem,\n  targetItems: CompItem[]\n) => {\n  const extractedMarkers:\n    | [number, PropertyValue][]\n    | null = extractTopLayerMarkers(sourceItem);\n\n  if (!extractedMarkers) return;\n\n  app.beginUndoGroup(\"TopLayerMarkerToTopLayer\");\n\n  targetItems.forEach(item => {\n    if (!isCompItem(item)) {\n      alert(\"No composition is selected.\");\n      return;\n    }\n    const targetLayer = item.layer(1);\n    const targetMarker = targetLayer.property(\"marker\") as Property;\n\n    extractedMarkers.forEach((_, i) => {\n      targetMarker.setValueAtTime(\n        extractedMarkers[i][0],\n        extractedMarkers[i][1]\n      );\n    });\n  });\n\n  app.endUndoGroup();\n};\n","import \"../../polyfill/array/forEach\";\nimport \"../../polyfill/array/every\";\nimport * as win from \"./ui\";\nimport { getSelectedItems } from \"../../utils/GetEntity/getSelectedEntity\";\nimport { times } from \"../../utils/Javascript/general\";\nimport { isAVItem, isAVLayer, isCompItem } from \"../../utils/typeCheck\";\nimport { topLayerMarkerToCompMarker } from \"./utils/topLayerMarkerToCompMarker\";\nimport { topLayerMarkerToTopLayer } from \"./utils/topLayerMarkerToTopLayer\";\n\nconst isCompItems = (items: any): items is CompItem[] => {\n  return items.every(isCompItem);\n};\n\nconst main = () => {\n  let sourceItem: CompItem;\n\n  // event\n  // ======\n  win.setButton.onClick = () => {\n    const items = getSelectedItems();\n\n    if (!items) {\n      return;\n    }\n\n    if (!isCompItem(items[0])) {\n      alert(\"No compitem is selected.\");\n      return;\n    }\n    sourceItem = items[0];\n\n    win.idText.text = sourceItem.id.toString();\n  };\n\n  win.ok.onClick = () => {\n    const targetItems = getSelectedItems();\n    if (!targetItems) {\n      return;\n    }\n\n    if (!isCompItems(targetItems)) {\n      alert(\"No compitem is selected.\");\n      return;\n    }\n\n    if (win.topLayerMarkerToCompMarkerRadio.value) {\n      topLayerMarkerToCompMarker(sourceItem, targetItems);\n    }\n\n    if (win.topLayerMarkerToTopLayerRadio.value) {\n      topLayerMarkerToTopLayer(sourceItem, targetItems);\n    }\n  };\n\n  // ======\n\n  win.dialog.layout.layout();\n  win.dialog.layout.resize();\n};\n\nmain();\n"],"names":["Array","prototype","forEach","callback","thisArg","TypeError","array","i","l","length","call","every","callbackfn","T","k","O","Object","len","arguments","kValue","testResult","dialog","globalThis","text","orientation","alignChildren","spacing","margins","methodGroup","add","undefined","name","topLayerMarkerToCompMarkerRadio","topLayerMarkerToTopLayerRadio","setButton","idGroup","idDescription","idText","preferredSize","width","confirmGroup","alignment","height","ok","justify","times","step","isCompItem","item","CompItem","getSelectedItems","items","app","project","selection","extractTopLayerMarkers","sourceLayer","layer","property","alert","sourceMarkers","numKeys","extractedMarkers","push","keyTime","keyValue","topLayerMarkerToCompMarker","sourceItem","targetItems","beginUndoGroup","_","markerProperty","setValueAtTime","endUndoGroup","topLayerMarkerToTopLayer","targetLayer","targetMarker","isCompItems","main","win","onClick","id","toString","value","layout","resize"],"mappings":"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"}