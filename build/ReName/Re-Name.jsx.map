{"version":3,"file":"Re-Name.jsx","sources":["../../src/polyfill/array/forEach.js","../../src/projects/ReName/ui.ts","../../src/utils/typeCheck.ts","../../src/utils/GetEntity/getEntity.ts","../../src/utils/GetEntity/getSelectedEntity.ts","../../src/projects/ReName/utils.ts","../../src/projects/ReName/rename.ts","../../src/projects/ReName/index.ts"],"sourcesContent":["/*\n * forEach Polyfill\n *\n * 2015-12-27\n *\n * By Feifei Hang, http://feifeihang.info\n * Public Domain.\n * NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.\n */\n\"use strict\";\n(function() {\n  if (!Array.prototype.forEach) {\n    Array.prototype.forEach = function forEach(callback, thisArg) {\n      if (typeof callback !== \"function\") {\n        throw new TypeError(callback + \" is not a function\");\n      }\n      var array = this;\n      thisArg = thisArg || this;\n      for (var i = 0, l = array.length; i !== l; ++i) {\n        callback.call(thisArg, array[i], i, array);\n      }\n    };\n  }\n})();\n","import globalThis from \"globalThis\";\n\nexport const isPanel = globalThis instanceof Panel;\n\nexport const dialog: Panel | Window = isPanel\n  ? globalThis\n  : new Window(\"dialog\");\n\n// dialog\n// ======\ndialog.text = \"Re-Name\";\ndialog.orientation = \"column\";\ndialog.alignChildren = [\"left\", \"top\"];\ndialog.spacing = 5;\ndialog.margins = 16;\n\n// targetEntityRadioGroup\n// ======\nexport const targetEntityRadioGroup = dialog.add(\"group\", undefined, {\n  name: \"targetEntityRadioGroup\"\n});\ntargetEntityRadioGroup.orientation = \"row\";\ntargetEntityRadioGroup.alignChildren = [\"left\", \"center\"];\ntargetEntityRadioGroup.spacing = 10;\ntargetEntityRadioGroup.margins = 0;\n\nexport const itemRadio = targetEntityRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"itemRadio\"\n  }\n);\nitemRadio.text = \"project Item\";\n\nexport const layerRadio = targetEntityRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"layerRadio\"\n  }\n);\nlayerRadio.text = \"Layer\";\n\n// targetPropRadioGroup\n// ======\nexport const targetPropRadioGroup = dialog.add(\"group\", undefined, {\n  name: \"targetPropRadioGroup\"\n});\ntargetPropRadioGroup.orientation = \"row\";\ntargetPropRadioGroup.alignChildren = [\"left\", \"center\"];\ntargetPropRadioGroup.spacing = 10;\ntargetPropRadioGroup.margins = 0;\n\nexport const nameRadio = targetPropRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"nameRadio\"\n  }\n);\nnameRadio.text = \"name\";\n\nexport const commentRadio = targetPropRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"commentRadio\"\n  }\n);\ncommentRadio.text = \"comment\";\n\nexport const nameToCommentRadio = targetPropRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"nameToCommentRadio\"\n  }\n);\nnameToCommentRadio.text = \"NameToComment\";\n\nexport const commentToNameRadio = targetPropRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"commentToNameRadio\"\n  }\n);\ncommentToNameRadio.text = \"CommentToName\";\n\n// methodRadioGroup\n// ======\nexport const methodRadioGroup = dialog.add(\"group\", undefined, {\n  name: \"methodType\"\n});\nmethodRadioGroup.orientation = \"row\";\nmethodRadioGroup.alignChildren = [\"left\", \"center\"];\nmethodRadioGroup.spacing = 10;\nmethodRadioGroup.margins = 0;\n\nexport const insertRadio = methodRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"insertRadio\"\n  }\n);\ninsertRadio.text = \"insert\";\n\nexport const replaceRadio = methodRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"replaceRadio\"\n  }\n);\nreplaceRadio.text = \"replace\";\n\n// insertRadioGroup\n// ======\nexport const insertRadioGroup = dialog.add(\"group\", undefined, {\n  name: \"insertType\"\n});\ninsertRadioGroup.orientation = \"row\";\ninsertRadioGroup.alignChildren = [\"left\", \"center\"];\ninsertRadioGroup.spacing = 10;\ninsertRadioGroup.margins = 0;\ninsertRadioGroup.indent = 20;\n\nexport const insertAllRadio = insertRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"insertAllRadio\"\n  }\n);\ninsertAllRadio.text = \"all\";\ninsertAllRadio.value = true;\n\nexport const insertHeadRadio = insertRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"insertHeadRadio\"\n  }\n);\ninsertHeadRadio.text = \"head\";\n\nexport const insertTailRadio = insertRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"insertTailRadio\"\n  }\n);\ninsertTailRadio.text = \"tail\";\n\n// replaceRadioGroup\n// ======\nexport const replaceRadioGroup = dialog.add(\"group\", undefined, {\n  name: \"replaceType\"\n});\nreplaceRadioGroup.orientation = \"row\";\nreplaceRadioGroup.alignChildren = [\"left\", \"center\"];\nreplaceRadioGroup.spacing = 10;\nreplaceRadioGroup.margins = 0;\nreplaceRadioGroup.indent = 20;\n\nexport const replaceSimpleRadio = replaceRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"replaceSimpleRadio\"\n  }\n);\nreplaceSimpleRadio.text = \"simple\";\n\nexport const replaceGlobRadio = replaceRadioGroup.add(\n  \"radiobutton\",\n  undefined,\n  undefined,\n  {\n    name: \"replaceGlobRadio\"\n  }\n);\nreplaceGlobRadio.text = \"advanced (glob)\";\n\n// searchGroup\n// ======\nexport const searchGroup = dialog.add(\"group\", undefined, {\n  name: \"searchGroup\"\n});\nsearchGroup.orientation = \"column\";\nsearchGroup.alignChildren = [\"left\", \"center\"];\nsearchGroup.spacing = 0;\nsearchGroup.margins = 0;\n\nexport const searchDesc = searchGroup.add(\"statictext\", undefined, undefined, {\n  name: \"searchDesc\"\n});\nsearchDesc.text = \"search:\";\n\nexport const searchInput = searchGroup.add(\"edittext\", undefined, undefined, {\n  name: \"search\"\n});\n(searchInput.preferredSize as Dimension).width = 240;\n\n// insertGroup\n// ======\nexport const insertGroup = dialog.add(\"group\", undefined, {\n  name: \"insertGroup\"\n});\ninsertGroup.orientation = \"column\";\ninsertGroup.alignChildren = [\"left\", \"center\"];\ninsertGroup.spacing = 0;\ninsertGroup.margins = 0;\n\nexport const inputDesc = insertGroup.add(\"statictext\", undefined, undefined, {\n  name: \"inputDesc\"\n});\ninputDesc.text = \"insert string:\";\n\nexport const insertInput = insertGroup.add(\"edittext\", undefined, undefined, {\n  name: \"insert\"\n});\n(insertInput.preferredSize as Dimension).width = 240;\n\n// confirmGroup\n// ======\nexport const confirmGroup = dialog.add(\"group\", undefined, {\n  name: \"confirmGroup\"\n});\nconfirmGroup.orientation = \"row\";\nconfirmGroup.alignChildren = [\"left\", \"center\"];\nconfirmGroup.spacing = 10;\nconfirmGroup.margins = 0;\nconfirmGroup.alignment = [\"left\", \"top\"];\n(confirmGroup.preferredSize as Dimension).height = 40;\n\nexport const ok = confirmGroup.add(\"button\", undefined, undefined, {\n  name: \"ok\"\n});\nok.text = \"OK\";\nok.justify = \"left\";\nok.alignment = [\"left\", \"center\"];\n","export const isFolderItem = (item: any): item is FolderItem => {\n  return item instanceof FolderItem;\n};\n\nexport const isCompItem = (item: any): item is CompItem => {\n  return item instanceof CompItem;\n};\n\nexport const isFootageItem = (item: any): item is FootageItem => {\n  return item instanceof FootageItem;\n};\n\nexport const isAVItem = (item: any): item is CompItem | FootageItem => {\n  return isCompItem(item) || isFootageItem(item);\n};\n\nexport const isAnyItem = (item: any): item is $T.ADBE.AnyItem => {\n  return isCompItem(item) || isFolderItem(item) || isFootageItem(item);\n};\n\nexport const isAVLayer = (layer: any): layer is AVLayer => {\n  return layer instanceof AVLayer;\n};\n\nexport const isCameraLayer = (layer: any): layer is CameraLayer => {\n  return layer instanceof CameraLayer;\n};\n\nexport const isLightLayer = (layer: any): layer is LightLayer => {\n  return layer instanceof LightLayer;\n};\n\nexport const isShapeLayer = (layer: any): layer is ShapeLayer => {\n  return layer instanceof ShapeLayer;\n};\n\nexport const isTextLayer = (layer: any): layer is TextLayer => {\n  return layer instanceof TextLayer;\n};\n\nexport const isAnyLayer = (layer: any): layer is $T.ADBE.AnyLayer => {\n  return (\n    isAVLayer(layer) ||\n    isCameraLayer(layer) ||\n    isLightLayer(layer) ||\n    isShapeLayer(layer) ||\n    isTextLayer(layer)\n  );\n};\n\nexport const isFileSource = (source: any): source is FileSource => {\n  return source instanceof FileSource;\n};\n\nexport const isSolidSource = (source: any): source is SolidSource => {\n  return source instanceof SolidSource;\n};\n\nexport const isPlaceholderSource = (\n  source: any\n): source is PlaceholderSource => {\n  return source instanceof PlaceholderSource;\n};\n\nexport const isAnySource = (\n  source: any\n): source is FileSource | SolidSource | PlaceholderSource => {\n  return (\n    isFileSource(source) || isSolidSource(source) || isPlaceholderSource(source)\n  );\n};\n\nexport const isProperty = (property: any): property is Property => {\n  return property instanceof Property;\n};\n\nexport const isPropertyGroup = (property: any): property is PropertyGroup => {\n  return property instanceof PropertyGroup;\n};\n\nexport const isMaskPropertyGroup = (\n  property: any\n): property is MaskPropertyGroup => {\n  return property instanceof MaskPropertyGroup;\n};\n\nexport const isAnyProperty = (\n  property: any\n): property is $T.ADBE.AnyProperty => {\n  return (\n    isProperty(property) ||\n    isPropertyGroup(property) ||\n    isMaskPropertyGroup(property)\n  );\n};\n\nexport const isTextDocument = (value: any): value is TextDocument => {\n  return value instanceof TextDocument;\n};\n\nexport const isShape = (value: any): value is Shape => {\n  return value instanceof Shape;\n};\n\nexport const isMarkerValue = (value: any): value is MarkerValue => {\n  return value instanceof MarkerValue;\n};\n\nexport const isBasicPropertyValue = (\n  value: any\n): value is $T.Mat.BasicValue => {\n  const isBasicPropertyArray =\n    isArray(value) &&\n    ((value.length === 2 && isNumber(value[0]) && isNumber(value[1])) ||\n      (value.length === 3 &&\n        isNumber(value[0]) &&\n        isNumber(value[1]) &&\n        isNumber(value[2])) ||\n      (value.length === 4 &&\n        isNumber(value[0]) &&\n        isNumber(value[1]) &&\n        isNumber(value[2]) &&\n        isNumber(value[3])));\n  return (\n    isUndefined(value) ||\n    isBoolean(value) ||\n    isNumber(value) ||\n    isBasicPropertyArray\n  );\n};\n\nexport const isPropertyValue = (value: any): value is PropertyValue => {\n  return (\n    isTextDocument(value) ||\n    isShape(value) ||\n    isMarkerValue(value) ||\n    isBasicPropertyValue(value)\n  );\n};\n\nexport const isObject = (data: any): data is { [key: string]: any } => {\n  return Object.prototype.toString.call(data) === \"[object Object]\";\n};\n\nexport const isArray = (data: any): data is any[] => {\n  return Array.isArray(data);\n};\n\nexport const isFunction = (data: any): data is Function => {\n  return typeof data === \"function\";\n};\n\nconst posinf = Number.POSITIVE_INFINITY;\nconst neginf = Number.NEGATIVE_INFINITY;\n\nexport const isNumber = (data: any): data is number => {\n  return typeof data === \"number\" && data > neginf && data < posinf;\n};\n\nexport const isUndefined = (data: any): data is undefined => {\n  return data === undefined;\n};\n\nexport const isBoolean = (data: any): data is Boolean => {\n  return data === false || data === true;\n};\n\nexport const isString = (data: any): data is string => {\n  return typeof data === \"string\";\n};\n","import { __Error__ } from \"../initialize\";\nimport { times } from \"../Javascript/general\";\nimport {\n  isCompItem,\n  isFolderItem,\n  isFootageItem,\n  isAVLayer,\n  isFileSource,\n  isSolidSource,\n  isProperty,\n  isPropertyGroup,\n  isObject,\n  isAnyLayer,\n  isAnyProperty,\n  isMaskPropertyGroup,\n  isAnyItem,\n  isTextLayer,\n  isShapeLayer\n} from \"../typeCheck\";\nimport {} from \"../System/fileSys\";\n\nexport const getActiveItem = (): $T.ADBE.AnyItem | null => {\n  const item = app.project.activeItem;\n  return (item as $T.ADBE.AnyItem) || null;\n};\n\nexport const getActiveCompItem = (): CompItem | null => {\n  const item = getActiveItem();\n  return item instanceof CompItem ? item : null;\n};\n\nexport const getItems = (\n  folder: FolderItem = app.project.rootFolder,\n  callback?: (item: $T.ADBE.AnyItem) => boolean\n): $T.ADBE.AnyItem[] => {\n  const items: $T.ADBE.AnyItem[] = [];\n  times(folder.numItems, index => {\n    const item = folder.item(index) as $T.ADBE.AnyItem;\n    if (callback && !callback(item)) return;\n    items.push(item);\n  });\n  return items;\n};\n\nexport const findItemWithName = (\n  name: string,\n  parent: FolderItem = app.project.rootFolder\n): $T.ADBE.AnyItem | null => {\n  let item: $T.ADBE.AnyItem | null = null;\n  getItems(parent).forEach(current => {\n    if (current.name === name) {\n      if (isAnyItem(current)) item = current;\n      return true;\n    }\n  });\n  return item;\n};\n\nexport const findFolderItemWithName = (\n  name: string,\n  parent: FolderItem = app.project.rootFolder\n): FolderItem | null => {\n  const item = findItemWithName(name, parent);\n  if (!isFolderItem(item)) {\n    __Error__(\n      $.line,\n      `findFolderItemWithName / not found FolderItem / name: ${name} / parent: ${\n        parent.name\n      } / item: ${item ? item.name : \"null\"}`\n    );\n    return null;\n  }\n  return item;\n};\n\nexport const findCompItemWithName = (\n  name: string,\n  parent: FolderItem = app.project.rootFolder\n): CompItem | null => {\n  const item = findItemWithName(name, parent);\n  if (!isCompItem(item)) {\n    __Error__(\n      $.line,\n      `findCompItemWithName / not found CompItem / name: ${name} / parent: ${\n        parent.name\n      } / item: ${item ? item.name : \"null\"}`\n    );\n    return null;\n  }\n  return item;\n};\n\nexport const findFootageItemWithName = (\n  name: string,\n  parent: FolderItem = app.project.rootFolder\n): FootageItem | null => {\n  const item = findItemWithName(name, parent);\n  if (!isFootageItem(item)) {\n    __Error__(\n      $.line,\n      `findFootageItemWithName / not found FootageItem / name: ${name} / parent: ${\n        parent.name\n      } / item: ${item ? item.name : \"null\"}`\n    );\n    return null;\n  }\n  return item;\n};\n\nexport const findLayerWithName = (\n  name: string,\n  comp: CompItem\n): $T.ADBE.AnyLayer | null => {\n  const layer = comp.layer(name) as $T.ADBE.AnyLayer | null;\n  return layer ? layer : null;\n};\n\nexport const findAVLayerWithName = (\n  name: string,\n  comp: CompItem\n): AVLayer | null => {\n  const layer = findLayerWithName(name, comp);\n  if (!isAVLayer(layer)) {\n    __Error__(\n      $.line,\n      `findAVLayerWithName / not found AVLayer / name: ${name} / comp: ${\n        comp.name\n      } / layer: ${layer ? layer.name : \"null\"}`\n    );\n    return null;\n  }\n  return layer;\n};\n\nexport const findTextLayerWithName = (\n  name: string,\n  comp: CompItem\n): TextLayer | null => {\n  const layer = findLayerWithName(name, comp);\n  if (!isTextLayer(layer)) {\n    __Error__(\n      $.line,\n      `findTextLayerWithName / not found TextLayer / name: ${name} / comp: ${\n        comp.name\n      } / layer: ${layer ? layer.name : \"null\"}`\n    );\n    return null;\n  }\n  return layer;\n};\n\nexport const findPropertyWithName = (\n  name: string,\n  parent: $T.ADBE.AnyLayer | PropertyGroup | MaskPropertyGroup\n): $T.ADBE.AnyProperty | null => {\n  const property = parent.property(name) as $T.ADBE.AnyProperty | null;\n  return property ? property : null;\n};\n\nexport const getLayers = (\n  comp: CompItem,\n  options: {\n    fromBottom?: boolean;\n    callback?: (layer: $T.ADBE.AnyLayer) => boolean;\n  } = {}\n): $T.ADBE.AnyLayer[] => {\n  const layers: $T.ADBE.AnyLayer[] = [];\n  times(comp.numLayers, index => {\n    const layer = comp.layer(index) as $T.ADBE.AnyLayer;\n    if (options.callback && options.callback(layer)) return;\n    layers.push(layer);\n  });\n  return options.fromBottom ? layers.reverse() : layers;\n};\n\nexport const getAllItems = (callback?: (item: $T.ADBE.AnyItem) => boolean) => {\n  const items: $T.ADBE.AnyItem[] = [];\n  times(app.project.numItems, i => {\n    const item = app.project.item(i) as $T.ADBE.AnyItem;\n    if (callback && callback(item)) return;\n    items.push(item);\n  });\n  return items;\n};\n","import { getActiveItem, getActiveCompItem } from \"./getEntity\";\n\nexport const getSelectedItems = (): $T.ADBE.AnyItem[] | null => {\n  const items = app.project.selection;\n  return items[0] ? (items as $T.ADBE.AnyItem[]) : null;\n};\n\nexport const getSelectedLayers = (\n  compItem: CompItem\n): $T.ADBE.AnyLayer[] | null => {\n  const layers = compItem.selectedLayers as $T.ADBE.AnyLayer[];\n  return layers[0] ? layers : null;\n};\n\nexport const getSelectedProperties = (\n  compItem: CompItem\n): $T.ADBE.AnyProperty[] | null => {\n  const properties = compItem.selectedProperties as\n    | $T.ADBE.AnyProperty[]\n    | null;\n  return properties && properties[0] ? properties : null;\n};\n\nexport const getSelectedPropertiesFromActive = ():\n  | $T.ADBE.AnyProperty[]\n  | null => {\n  const compItem = getActiveCompItem();\n  return compItem && getSelectedProperties(compItem);\n};\n\nexport const getSelectedLayersFromActive = (): $T.ADBE.AnyLayer[] | null => {\n  const compItem = getActiveCompItem();\n  return compItem && getSelectedLayers(compItem);\n};\n","import {\n  getSelectedItems,\n  getSelectedLayersFromActive\n} from \"../../utils/GetEntity/getSelectedEntity\";\nimport { isFunction } from \"../../utils/typeCheck\";\n\nexport const addString = (\n  entity: \"item\" | \"layer\",\n  source: \"name\" | \"comment\",\n  target: \"name\" | \"comment\",\n  text: string | ((prev: string) => string | null)\n): void => {\n  app.beginUndoGroup(\"Add-Comment\");\n\n  const entities =\n    entity === \"item\"\n      ? getSelectedItems()\n      : entity === \"layer\"\n      ? getSelectedLayersFromActive()\n      : null;\n\n  entities &&\n    entities.forEach((entity: $T.ADBE.AnyItem | $T.ADBE.AnyLayer) => {\n      entity[target] = isFunction(text)\n        ? text(entity[source]) || entity[target]\n        : text;\n    });\n\n  app.endUndoGroup();\n};\n","export const escapeRegex = (str: string): string => {\n  return str.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\");\n};\n\nexport const escapeGlob = (str: string): string => {\n  return str.replace(/[-\\/\\\\^$+.()|[\\]{}]/g, \"\\\\$&\");\n};\n\nexport const simpleGlobToRegexp = (glob: string): RegExp => {\n  const escapedString = escapeGlob(glob);\n\n  let offsetIncrement = 0;\n  const regexpString = escapedString.replace(\n    /(\\*|\\?+)/g,\n    (match, string, offset) => {\n      // Since offset is performed on the replaced string, the increment of the replaced string is added to offset.\n      const trueOffset = offset - offsetIncrement;\n      if (match === \"*\") {\n        if (\n          trueOffset - offsetIncrement > 0 &&\n          escapedString.substr(trueOffset - 1 - offsetIncrement, 1) === \"\\\\\"\n        ) {\n          offsetIncrement += 1;\n          return \"\\\\*\";\n        }\n        offsetIncrement += 3;\n        return \"(.*)\";\n      }\n      if (/\\?+/.test(match)) {\n        if (\n          trueOffset > 0 &&\n          escapedString.substr(trueOffset - 1, 1) === \"\\\\\"\n        ) {\n          if (match.length > 1) {\n            offsetIncrement += 3;\n            return `\\\\?(${match.substr(1).replace(/\\?/g, \".\")})`;\n          }\n          offsetIncrement += 1;\n          return \"\\\\?\";\n        }\n        offsetIncrement += 2;\n        return `(${match.replace(/\\?/g, \".\")})`;\n      }\n      return \"\";\n    }\n  );\n\n  return new RegExp(regexpString);\n};\n\nexport const renameWithSimpleGlob = (\n  targetString: string,\n  glob: string,\n  replaceStr: string\n): string => {\n  const regexp = simpleGlobToRegexp(glob);\n  const newString = targetString.replace(regexp, replaceStr);\n  return newString;\n};\n","import \"../../polyfill/array/forEach\";\nimport * as win from \"./ui\";\nimport { addString } from \"./utils\";\nimport { renameWithSimpleGlob, escapeRegex } from \"./rename\";\n\nconst main = () => {\n  // initialize\n  // ======\n  win.itemRadio.value = true;\n  win.nameRadio.value = true;\n  win.insertRadio.value = true;\n  win.replaceSimpleRadio.value = true;\n  win.searchGroup.enabled = false;\n  win.replaceRadioGroup.enabled = false;\n\n  // event\n  // ======\n  win.insertRadio.onActivate = () => {\n    win.searchGroup.enabled = false;\n    win.insertRadioGroup.enabled = true;\n    win.replaceRadioGroup.enabled = false;\n  };\n\n  win.replaceRadio.onActivate = () => {\n    win.searchGroup.enabled = true;\n    win.insertRadioGroup.enabled = false;\n    win.replaceRadioGroup.enabled = true;\n  };\n\n  win.ok.onClick = () => {\n    let addStringCallback: ((prev: string) => string | null) | undefined;\n    const replaceText = win.insertInput.text;\n    const searchText = win.searchInput.text;\n\n    if (win.insertRadio.value) {\n      if (win.insertAllRadio.value) {\n        addStringCallback = () => replaceText;\n      }\n      if (win.insertHeadRadio.value) {\n        addStringCallback = prev => replaceText + prev;\n      }\n      if (win.insertTailRadio.value) {\n        addStringCallback = prev => prev + replaceText;\n      }\n    }\n\n    if (win.replaceRadio.value) {\n      if (win.replaceSimpleRadio.value) {\n        addStringCallback = prev => {\n          const regexp = new RegExp(escapeRegex(searchText));\n          return prev.replace(regexp, replaceText);\n        };\n      }\n      if (win.replaceGlobRadio.value) {\n        addStringCallback = prev => {\n          const newString = renameWithSimpleGlob(prev, searchText, replaceText);\n          return newString;\n        };\n      }\n    }\n\n    if (addStringCallback !== undefined) {\n      const entity = win.itemRadio.value\n        ? \"item\"\n        : win.layerRadio.value\n        ? \"layer\"\n        : null;\n      if (!entity) return;\n\n      const source =\n        win.nameRadio.value || win.nameToCommentRadio.value\n          ? \"name\"\n          : win.commentRadio.value || win.commentToNameRadio.value\n          ? \"comment\"\n          : null;\n      if (!source) return;\n\n      const target =\n        win.nameRadio.value || win.commentToNameRadio.value\n          ? \"name\"\n          : win.commentRadio.value || win.nameToCommentRadio.value\n          ? \"comment\"\n          : null;\n      if (!target) return;\n\n      addString(entity, source, target, addStringCallback);\n    }\n\n    !win.isPanel && (win.dialog as Window).close();\n  };\n\n  // ======\n  win.dialog.layout.layout();\n  !win.isPanel && (win.dialog as Window).show();\n};\n\nmain();\n"],"names":["Array","prototype","forEach","callback","thisArg","TypeError","array","i","l","length","call","isPanel","globalThis","Panel","dialog","Window","text","orientation","alignChildren","spacing","margins","targetEntityRadioGroup","add","undefined","name","itemRadio","layerRadio","targetPropRadioGroup","nameRadio","commentRadio","nameToCommentRadio","commentToNameRadio","methodRadioGroup","insertRadio","replaceRadio","insertRadioGroup","indent","insertAllRadio","value","insertHeadRadio","insertTailRadio","replaceRadioGroup","replaceSimpleRadio","replaceGlobRadio","searchGroup","searchDesc","searchInput","preferredSize","width","insertGroup","inputDesc","insertInput","confirmGroup","alignment","height","ok","justify","isFunction","data","getActiveItem","item","app","project","activeItem","getActiveCompItem","CompItem","getSelectedItems","items","selection","getSelectedLayers","compItem","layers","selectedLayers","getSelectedLayersFromActive","addString","entity","source","target","beginUndoGroup","entities","endUndoGroup","escapeRegex","str","replace","escapeGlob","simpleGlobToRegexp","glob","escapedString","offsetIncrement","regexpString","match","string","offset","trueOffset","substr","test","RegExp","renameWithSimpleGlob","targetString","replaceStr","regexp","newString","main","win","enabled","onActivate","onClick","addStringCallback","replaceText","searchText","prev","close","layout","show"],"mappings":"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"}